@using Microsoft.AspNetCore.Identity
@using StudyCESI.Model.Entities
@model IndexViewModel

@inject SignInManager<User> SignInManager

@{
    ViewData["Title"] = "Page d'accueil";
}

<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <img src="~/images/eLearning.png" alt="eLearning" class="img-caroussel" />
            <div class="carousel-caption active" role="option">
                <h1>
                    Bienvenue sur Study'CESI !
                </h1>
                <p>
                    La plateforme d'examen en ligne
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/images/contenu-e-learning-1-701x288.png" alt="eLearning-2" class="img-caroussel" />
            <div class="carousel-caption" role="option">
                <p>
                    Installez-vous confortablement, et c'est parti !
                </p>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

@if (SignInManager.IsSignedIn(User) && User.FindFirst("Role").Value == "Enseignant")
{
    <div class="row">
        @if (Model.Exams.Count>0)
        {
            <div class="col-md-6">
                <h2>Mes examens</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.Exams[0].Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Exams[0].Subject.Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Exams[0].NumberQuestions)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Exams[0].Duration)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Exams[0].NumberTriesAllow)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Exams[0].EndDate)
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.Exams)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.SubjectId)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.NumberQuestions)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Duration)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.NumberTriesAllow)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.EndDate)
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        @if (Model.Questions.Count > 0)
        {
            <div class="col-md-6">
                <h2>Mes questions</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.Questions[0].Header)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Questions[0].Mark)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Questions[0].TypeQuestion)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Questions[0].Subject)
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.Questions)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Header)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Mark)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.TypeQuestion.Name)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Subject.Name)
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>

}
else if (SignInManager.IsSignedIn(User) && User.FindFirst("Role").Value == "Etudiant")
{
    if (Model.Exams.Count > 0) { }
    <div class="row">
        <div class="col-md-8">
            <h2>Mes examens</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.Exams[0].Name)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Exams[0].Subject.Name)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Exams[0].NumberQuestions)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Exams[0].Duration)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Exams[0].NumberTriesAllow)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Exams[0].EndDate)
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Exams)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.SubjectId)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.NumberQuestions)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Duration)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.NumberTriesAllow)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.EndDate)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}
